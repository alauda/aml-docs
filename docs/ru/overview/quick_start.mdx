---
weight: 30
sourceSHA: f9e806874104044ad33e93279de8a5fad0720bc79abda380caa94c0faf693af7
---

Этот документ предназначен для того, чтобы помочь новым пользователям быстро понять, как развернуть сервисы вывода в Alauda AI. Развернув простой сервис вывода "генерация текста" и испытав его, вы сможете быстро овладеть основными функциями и методами использования платформы.

## Применимые сценарии

- Вы новый пользователь Alauda AI и хотите быстро понять, как опубликовать модель в качестве вызываемого сервиса вывода.
- Вы хотите понять основные функции Alauda AI через простой пример, включая загрузку модели, публикацию сервиса вывода и вызов сервиса вывода.
- Вы только что развернули новую среду Alauda AI и хотите быстро проверить, доступна ли она.

## Оценочное время чтения

Ожидается, что выполнение чтения и операций в этом документе займет примерно 20 минут.

## Примечания

Этот документ демонстрирует только базовый процесс. Для подробных параметров конфигурации, пожалуйста, обратитесь к полной документации.

## Предварительные условия

- У вас уже есть учетная запись администратора платформы (используется для создания и управления пространствами имен).
- Вы подготовили файл модели для развертывания (вы можете загрузить его заранее с таких сайтов, как Hugging Face или ModelScope).
- Если вам нужно использовать вывод на GPU, пожалуйста, убедитесь, что плагин GPU установлен. Если нет, установите плагин GPU в центре управления плагинами платформы.
- Вы понимаете основные концепции Kubernetes и модели машинного обучения.

## Обзор шагов

| Шаг  | Операция                  | Описание                                                                                           | Примечания                                                                                   |
| ---- | ------------------------- | -------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------- |
| 1    | Создать пространство имен | Создайте пространство имен в контейнерной платформе и настройте соответствующие роли для Alauda AI для пользователя | Пропустите этот шаг, если у вас уже есть пространство имен и назначенные разрешения пользователя |
| 2    | Управлять пространством имен | Включите пространство имен в управление Alauda AI                                                   | Пропустите этот шаг, если пространство имен уже управляется                                 |
| 3    | Загрузить модель         | Загрузите файл модели в репозиторий модели                                                         | Пропустите этот шаг, если вы уже загрузили модель или используете совместимую модель платформы |
| 4    | Опубликовать сервис вывода | Опубликуйте модель в качестве онлайн сервиса вывода                                               |                                                                                             |
| 5    | Вызвать сервис вывода     | Вызовите сервис вывода через API или функцию "Опыт"                                                |                                                                                             |

## Шаги операции

### Шаг 1: Создать пространство имен и назначить разрешения пользователю

**Примечание: Пропустите этот шаг, если у вас уже есть пространство имен и назначенные разрешения пользователю**

Пространства имен являются основой изоляции многопользовательской среды в Alauda AI, и каждый проект должен использовать независимое пространство имен.

1. Войдите в контейнерную платформу как администратор.
2. Перейдите в **Управление проектами**, выберите или создайте проект.
3. На странице деталей проекта нажмите **Пространство имен**.
4. Нажмите **Создать пространство имен** и введите имя (например, "text-classification-demo").
5. Нажмите **Создать**, чтобы завершить создание пространства имен.
6. Назначьте разрешения пространства имен пользователю:
   - Перейдите в **Администратор** > **Пользователи** > **Пользователи**.
   - Создайте пользователя или выберите существующего пользователя, которому необходимо использовать это пространство имен.
   - Нажмите **Настроить роли** > **Добавить роль**.
   - Добавьте **Роли Alauda AI** и свяжите их с созданным пространством имен и проектом, к которому принадлежит пространство имен.
     - aml-namespace-editor: используется разработчиками пространства имен, имеет разрешения на создание, удаление, изменение и запросы моделей и сервисов вывода.
     - aml-namespace-owner: используется管理者 пространства имен.
     - aml-namespace-viewer: может только просматривать модели, сервисы вывода и другие ресурсы.

### Шаг 2: Управлять пространством имен

**Примечание: Пропустите этот шаг, если пространство имен уже управляется**

Включите созданное пространство имен в управление Alauda AI:

1. Войдите в Alauda AI, выберите **Администратор** в верхнем навигационном меню и выберите кластер, в котором находится недавно созданное пространство имен в "Кластеры" справа от **Администраторы**.
2. Нажмите **Управление пространством имен** в левом навигационном меню и нажмите кнопку **Управление пространством имен**.
3. Выберите недавно созданное пространство имен "text-classification-demo" в диалоговом окне.
4. Нажмите **Управление**, чтобы завершить операцию управления.

### Шаг 3: Загрузить модель

**Примечание: Пропустите этот шаг, если вы уже загрузили модель или используете совместимую модель платформы**

Загрузите модель классификации текста в репозиторий модели:

1. Войдите в Alauda AI, выберите **Бизнес-представление** в верхнем навигационном меню и выберите управляющее пространство имен из предыдущего шага.
2. Нажмите **Репозиторий моделей** в левом навигационном меню, нажмите **Создать репозиторий моделей** и введите подготовленное имя модели, например "gpt2".
3. После создания перейдите на вкладку **Управление файлами** на странице деталей модели.
4. Нажмите **Импортировать файл модели**, и перетащите или выберите файлы/подпапки модели для загрузки. Если загружаете большую языковую модель, интерфейс может зависать из-за большого размера файла. Рекомендуется использовать команду git push для загрузки больших файлов модели в репозиторий модели.
5. Нажмите кнопку **Импорт**, и дождитесь завершения загрузки.
6. На вкладке **Управление файлами** нажмите **Обновить метаданные** и выберите правильный "Тип задачи" и "Фреймворк" в соответствии с атрибутами большой модели.
   - Тип задачи: это атрибут самой модели, его можно получить, просматривая метку на странице деталей загрузки модели. Разделяется на "Генерация текста", "Генерация изображений" и т. д.
   - Фреймворк: это также атрибут самой модели, его можно получить, просматривая метку на странице деталей загрузки модели. Разделяется на "Transformers", "MLflow" и т. д. Большинство популярных открытых языковых моделей имеют тип "Transformers".

### Шаг 4: Опубликовать сервис вывода

Опубликуйте модель в качестве онлайн-сервиса вывода:

1. На странице деталей модели нажмите **Опубликовать API вывода** > **Пользовательская публикация**.
2. Настройте параметры сервиса:
   - Имя: gpt2-service
   - Модель: gpt2
   - Версия: Branch-main
   - Временные исполнения вывода: Необходимо выбрать на основе установленной версии cuda на узле GPU. Например, если установлен драйвер cuda11, выберите "vllm-cuda11.8-x86". Если установлен cuda12, выберите "vllm-cuda12.1-x86".
   - Запросы ресурсов: 1CPU/4Gi Оперативной памяти
   - Ограничения ресурсов: 2CPU/6Gi Оперативной памяти
   - Ускорение GPU: Менеджер GPU
     - GPU vcore: 30
     - GPU vmemory: 32
   - Хранение: Подключить существующий PVC/создать PVC или Временное хранилище/емкость 10Gi
   - Авто масштабирование: Вымкнено
   - Количество экземпляров: 1
3. Нажмите **Опубликовать** и дождитесь, пока сервис не запустится.
4. Просмотрите статус сервиса на странице **Сервисы вывода**.

### Шаг 5: Вызвать сервис вывода

Проверьте опубликованный сервис вывода:

1. Нажмите **Сервисы вывода** в левом навигационном меню, нажмите на имя "Опубликованный сервис вывода" и нажмите **Опыт** на странице деталей сервиса вывода.
2. Введите тестовый текст, например "Рекомендуйте несколько хороших книг".
3. Просмотрите сгенерированный текст и параметры генерации, возвращенные моделью.
