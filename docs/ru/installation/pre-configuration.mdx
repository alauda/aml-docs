---
weight: 5
sourceSHA: f9b8e3ec611ccf273a6ae7b55d266e6f53fc84723276a59d7c33c94efb350391
---

# Предварительная настройка

## Конфигурация GitLab

### Отключение сроков действия токенов доступа

Если GitLab работает на версии `v17.0` или выше, необходимо **отключить** сроки действия токенов доступа.

:::warning

Если срок действия токена доступа остается включенным, необходимо будет вручную обновлять административный токен как минимум раз в год, иначе функциональность Alauda AI может прекратиться.

:::

Чтобы **отключить** сроки действия для новых токенов доступа:

1. В левой боковой панели, внизу, выберите **Администратор**.
2. Выберите **Настройки > Общие**.
3. Разверните **Учетная запись и лимит**.
4. **Снимите** отметку с флажка **Срок действия токена доступа для личного / проекта / группы**.
5. Выберите **Сохранить изменения**.

### Генерация нового токена

Чтобы **сгенерировать** токен полномочий для администратора:

1. В левой боковой панели, внизу, выберите **Администратор**.
2. Выберите **Обзор > Пользователи**.
3. Выберите администратора (например, Administrator).
4. В верхней навигационной панели выберите **Токены полномочий**.
5. Выберите **Добавить новый токен**.
6. В всплывающей форме:
   1. Введите **Имя токена** для Alauda AI (например, `aml-root`).
   2. Удалите **Срок действия** (выберите значок "x", чтобы удалить срок действия).
   3. Убедитесь, что отмечены все области (особенно область **api**) для **Выбора областей**.
7. Выберите **Создать токен полномочий**.
8. **Сохраните** вновь сгенерированный токен под **Ваш новый токен полномочий**, он понадобится нам позже.

:::warning

Убедитесь, что вы сохранили вновь сгенерированный токен - вы не сможете получить к нему доступ снова.

:::

### Создание секрета Kubernetes для токена администратора

Затем создаем секрет для токена администратора gitlab с именем **aml-gitlab-admin-token** в пространстве имен **cpaas-system**:

```bash
# [!code highlight]
# Пожалуйста, замените ${TOKEN} на реальный ранее сохраненный токен
# [!code callout:3]
kubectl create secret generic aml-gitlab-admin-token \
  --from-literal="password=${TOKEN}" \
  -n cpaas-system
```

<Callouts>
  1. Создайте секрет токена администратора gitlab с именем **aml-gitlab-admin-token**.
  2. Токен сохранен под ключом **password**, пожалуйста, замените `${TOKEN}` на реальный ранее сохраненный токен.
  3. Секрет создан в пространстве имен **cpaas-system**.
</Callouts>
